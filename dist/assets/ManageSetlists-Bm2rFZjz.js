import{u as e,a as s,j as t}from"./index-Babt8UfR.js";import{h as i,r as l}from"./vendor-react-ET7pSeaL.js";import{a}from"./services-P15qPlA6.js";import{g as n}from"./pdfGenerator-Cd7u-Oa5.js";import{c,q as r,m as o,n as d,o as m,r as x,s as u}from"./vendor-ui-CCR3b1TD.js";import"./vendor-supabase-DKeZICmP.js";import"./vendor-pdf-PEeN9p2O.js";const b=()=>{const{setPageTitle:b}=e(),{user:h}=s(),p=i(),[j,f]=l.useState([]),[g,N]=l.useState(!0),[v,y]=l.useState(null),[w,z]=l.useState(""),[S,k]=l.useState("name"),[C,P]=l.useState("asc"),[D,F]=l.useState(1),[I,L]=l.useState(10),[M,E]=l.useState(!1),[_,$]=l.useState({sourceSetlistId:"",newName:"",isPublic:!1});l.useEffect(()=>{b("Setlists"),q()},[b]);const q=async()=>{N(!0),y(null);try{const e=await a.getAllSetlists();f(e)}catch(e){y(e.message||"Failed to fetch setlists. Please try again.")}finally{N(!1)}},A=async e=>{if(window.confirm("Are you sure you want to delete this setlist?")){N(!0),y(null);try{await a.deleteSetlist(e),await q()}catch(s){y(s.message||"Failed to delete setlist. Please try again.")}finally{N(!1)}}},V=async e=>{try{await n(e)}catch(s){y("Failed to generate PDF. Please try again.")}},B=e=>{S===e?P("asc"===C?"desc":"asc"):(k(e),P("asc")),F(1)},H=l.useMemo(()=>j.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())),[j,w]),W=l.useMemo(()=>S?[...H].sort((e,s)=>{const t=e[S]||"",i=s[S]||"";return t<i?"asc"===C?-1:1:t>i?"asc"===C?1:-1:0}):H,[H,S,C]),G=Math.ceil(W.length/I),T=W.slice((D-1)*I,D*I),J=e=>S===e?"asc"===C?t.jsx(x,{size:16,className:"ml-1"}):t.jsx(u,{size:16,className:"ml-1"}):null;return t.jsxs("div",{className:"max-w-7xl mx-auto fade-in",children:[t.jsx("div",{className:"mb-6 sm:mb-8",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-2xl flex items-center justify-center",children:t.jsx(c,{className:"h-5 w-5 text-emerald-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-zinc-100",children:"Setlists"}),t.jsx("p",{className:"text-sm sm:text-base text-zinc-400",children:"Manage your performance setlists"})]})]})}),v&&t.jsxs("div",{className:"bg-red-900/30 border border-red-800/50 text-red-200 px-4 py-3 rounded-xl mb-6 backdrop-blur-sm",role:"alert",children:[t.jsx("strong",{className:"font-bold",children:"Error!"}),t.jsxs("span",{className:"block sm:inline",children:[" ",v]})]}),t.jsxs("div",{className:"card-modern p-4 sm:p-6 lg:p-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0",children:[t.jsx("div",{className:"w-full sm:w-2/3 lg:w-1/2",children:t.jsx("input",{type:"text",placeholder:"Search setlists...",value:w,onChange:e=>z(e.target.value),className:"input-modern"})}),t.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[t.jsxs("button",{onClick:()=>E(!M),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-all btn-animate shadow-lg font-medium mobile-form-button",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),M?"Cancel":"New (From Existing)"]}),t.jsxs("button",{onClick:()=>p("/setlists/add"),className:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all btn-animate shadow-lg font-medium mobile-form-button",children:[t.jsx(r,{size:20,className:"mr-2"}),"New Setlist"]})]})]}),M&&t.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4 sm:p-6 border border-zinc-700 mb-6",children:[t.jsx("h3",{className:"text-lg sm:text-lg font-medium text-zinc-100 mb-4",children:"Duplicate Existing Setlist"}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),_.sourceSetlistId&&_.newName.trim()){N(!0),y(null);try{await a.duplicateSetlist(_.sourceSetlistId,_.newName,h.id,_.isPublic),await q(),E(!1),$({sourceSetlistId:"",newName:"",isPublic:!1})}catch(s){y(s.message||"Failed to duplicate setlist. Please try again.")}finally{N(!1)}}else y("Please select a source setlist and enter a new name")},className:"space-y-4 sm:space-y-4",children:[t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-2 gap-4 mobile-form-grid",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"sourceSetlist",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Source Setlist"}),t.jsxs("select",{id:"sourceSetlist",value:_.sourceSetlistId,onChange:e=>$(s=>({...s,sourceSetlistId:e.target.value})),className:"input-modern",required:!0,children:[t.jsx("option",{value:"",children:"Choose a setlist to duplicate..."}),j.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{htmlFor:"newName",className:"block text-sm font-medium text-zinc-300 mb-2",children:"New Setlist Name"}),t.jsx("input",{type:"text",id:"newName",value:_.newName,onChange:e=>$(s=>({...s,newName:e.target.value})),className:"input-modern",placeholder:"Enter new setlist name...",required:!0})]})]}),t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("input",{id:"duplicateIsPublic",type:"checkbox",checked:_.isPublic,onChange:e=>$(s=>({...s,isPublic:e.target.checked})),className:"h-5 w-5 sm:h-4 sm:w-4 text-blue-600 focus:ring-blue-500 border-zinc-600 rounded bg-zinc-700"}),t.jsx("label",{htmlFor:"duplicateIsPublic",className:"block text-base sm:text-sm text-zinc-300",children:"Make this setlist public (visible to all users)"})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3",children:[t.jsx("button",{type:"button",onClick:()=>E(!1),className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-3 border border-zinc-600 rounded-xl text-zinc-300 bg-zinc-700 hover:bg-zinc-600 transition-colors mobile-form-button",children:"Cancel"}),t.jsxs("button",{type:"submit",disabled:g,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors mobile-form-button",children:[t.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),g?"Duplicating...":"Duplicate Setlist"]})]})]})]}),g&&t.jsx("p",{className:"text-center text-zinc-300 py-8",children:"Loading setlists..."}),!g&&0===j.length&&!v&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(c,{className:"mx-auto h-12 w-12 text-zinc-400 mb-4"}),t.jsx("p",{className:"text-zinc-300 text-lg sm:text-lg mb-2",children:"No setlists found"}),t.jsx("p",{className:"text-zinc-400 mb-6 px-4",children:"Create your first setlist to get started"}),t.jsxs("button",{onClick:()=>p("/setlists/add"),className:"inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all btn-animate font-medium mobile-form-button",children:[t.jsx(r,{size:20,className:"mr-2"}),"Create Setlist"]})]}),!g&&j.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden sm:block bg-zinc-900/50 rounded-xl overflow-hidden border border-zinc-800",children:t.jsxs("table",{className:"min-w-full divide-y divide-zinc-700",children:[t.jsx("thead",{className:"bg-zinc-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider cursor-pointer hover:bg-zinc-700 transition-colors",onClick:()=>B("name"),children:t.jsxs("div",{className:"flex items-center",children:["Setlist Name ",J("name")]})}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider",children:"Visibility"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider cursor-pointer hover:bg-zinc-700 transition-colors",onClick:()=>B("created_at"),children:t.jsxs("div",{className:"flex items-center",children:["Created ",J("created_at")]})}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-right text-xs font-medium text-zinc-300 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-zinc-800 divide-y divide-zinc-700",children:T.map(e=>t.jsxs("tr",{className:"hover:bg-zinc-700 transition-colors",children:[t.jsx("td",{className:"px-4 sm:px-6 py-4",children:t.jsx("button",{onClick:()=>p(`/setlists/${e.id}`),className:"text-sm font-medium text-blue-400 hover:text-blue-300 transition-colors text-left",children:e.name})}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-zinc-300",children:e.is_public?t.jsx("span",{className:"badge badge-success",children:"Public"}):t.jsx("span",{className:"badge badge-secondary",children:"Private"})}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-zinc-300",children:new Date(e.created_at).toLocaleDateString()}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-right",children:t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>V(e),className:"p-2 text-green-400 hover:text-green-300 transition-colors",title:"Print Setlist",children:t.jsx(o,{size:18})}),t.jsx("button",{onClick:()=>p(`/setlists/edit/${e.id}`),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit Setlist",children:t.jsx(d,{size:18})}),t.jsx("button",{onClick:()=>A(e.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete Setlist",children:t.jsx(m,{size:18})})]})})]},e.id))})]})}),t.jsx("div",{className:"sm:hidden space-y-3",children:T.map(e=>t.jsxs("div",{className:"mobile-table-card",children:[t.jsx("div",{className:"flex items-start justify-between mb-3",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("button",{onClick:()=>p(`/setlists/${e.id}`),className:"text-lg font-semibold text-blue-400 hover:text-blue-300 transition-colors text-left block mb-2",children:e.name}),t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.is_public?t.jsx("span",{className:"badge badge-success text-sm",children:"Public"}):t.jsx("span",{className:"badge badge-secondary text-sm",children:"Private"}),t.jsx("span",{className:"text-sm text-zinc-400",children:new Date(e.created_at).toLocaleDateString()})]})]})}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>V(e),className:"mobile-action-btn flex items-center justify-center",title:"Print Setlist",children:t.jsx(o,{size:20,className:"text-green-400"})}),t.jsx("button",{onClick:()=>p(`/setlists/edit/${e.id}`),className:"mobile-action-btn flex items-center justify-center",title:"Edit Setlist",children:t.jsx(d,{size:20,className:"text-blue-400"})}),t.jsx("button",{onClick:()=>A(e.id),className:"mobile-action-btn flex items-center justify-center",title:"Delete Setlist",children:t.jsx(m,{size:20,className:"text-red-400"})})]})]},e.id))}),G>1&&t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 space-y-4 sm:space-y-0",children:[t.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-2",children:[t.jsx("label",{htmlFor:"items-per-page",className:"text-base sm:text-sm text-zinc-300 font-medium",children:"Items per page:"}),t.jsxs("select",{id:"items-per-page",value:I,onChange:e=>L(Number(e.target.value)),className:"block w-24 sm:w-20 px-4 py-3 sm:px-3 sm:py-2 bg-zinc-800 border border-zinc-700 text-zinc-100 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors mobile-action-btn",children:[t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"10",children:"10"}),t.jsx("option",{value:"20",children:"20"}),t.jsx("option",{value:"50",children:"50"})]})]}),t.jsxs("nav",{className:"flex items-center space-x-2 sm:space-x-1",children:[t.jsx("button",{onClick:()=>F(e=>Math.max(1,e-1)),disabled:1===D,className:"px-4 py-3 sm:px-3 sm:py-2 rounded-xl border border-zinc-600 bg-zinc-700 text-base sm:text-sm text-zinc-300 hover:bg-zinc-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors mobile-action-btn",children:"Previous"}),t.jsxs("span",{className:"px-4 py-3 sm:px-4 sm:py-2 text-base sm:text-sm text-zinc-300",children:[D," of ",G]}),t.jsx("button",{onClick:()=>F(e=>Math.min(G,e+1)),disabled:D===G,className:"px-4 py-3 sm:px-3 sm:py-2 rounded-xl border border-zinc-600 bg-zinc-700 text-base sm:text-sm text-zinc-300 hover:bg-zinc-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors mobile-action-btn",children:"Next"})]})]})]})]})]})};export{b as default};
