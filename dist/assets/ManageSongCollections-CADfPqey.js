import{u as e,a as s,j as t}from"./index-Babt8UfR.js";import{h as l,r as i}from"./vendor-react-ET7pSeaL.js";import{c as n}from"./services-P15qPlA6.js";import{M as a,q as c,n as r,o,r as d,s as x}from"./vendor-ui-CCR3b1TD.js";import"./vendor-supabase-DKeZICmP.js";const m=()=>{const{setPageTitle:m}=e(),{user:u}=s(),h=l(),[p,b]=i.useState([]),[j,g]=i.useState(!0),[N,f]=i.useState(null),[v,y]=i.useState(""),[z,w]=i.useState("name"),[C,k]=i.useState("asc"),[S,P]=i.useState(1),[D,M]=i.useState(10);i.useEffect(()=>{m("Song Collections"),_()},[m]);const _=async()=>{g(!0),f(null);try{const e=await n.getAllSongCollections();b(e)}catch(e){f(e.message||"Failed to fetch song collections. Please try again.")}finally{g(!1)}},L=async e=>{if(window.confirm("Are you sure you want to delete this song collection?")){g(!0),f(null);try{await n.deleteSongCollection(e),await _()}catch(s){f(s.message||"Failed to delete song collection. Please try again.")}finally{g(!1)}}},E=e=>{z===e?k("asc"===C?"desc":"asc"):(w(e),k("asc")),P(1)},F=i.useMemo(()=>p.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())),[p,v]),$=i.useMemo(()=>z?[...F].sort((e,s)=>{const t=e[z]||"",l=s[z]||"";return t<l?"asc"===C?-1:1:t>l?"asc"===C?1:-1:0}):F,[F,z,C]),A=Math.ceil($.length/D),q=$.slice((S-1)*D,S*D),I=e=>z===e?"asc"===C?t.jsx(d,{size:16,className:"ml-1"}):t.jsx(x,{size:16,className:"ml-1"}):null;return t.jsxs("div",{className:"max-w-7xl mx-auto fade-in",children:[t.jsx("div",{className:"mb-8",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-2xl flex items-center justify-center",children:t.jsx(a,{className:"h-5 w-5 text-purple-400"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-zinc-100",children:"Song Collections"}),t.jsx("p",{className:"text-zinc-400",children:"Organize and curate your songs"})]})]})}),N&&t.jsxs("div",{className:"bg-red-900/30 border border-red-800/50 text-red-200 px-4 py-3 rounded-xl mb-6 backdrop-blur-sm",role:"alert",children:[t.jsx("strong",{className:"font-bold",children:"Error!"}),t.jsxs("span",{className:"block sm:inline",children:[" ",N]})]}),t.jsxs("div",{className:"card-modern p-4 lg:p-6",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0",children:[t.jsx("div",{className:"w-full sm:w-1/2 lg:w-1/3",children:t.jsx("input",{type:"text",placeholder:"Search collections...",value:v,onChange:e=>y(e.target.value),className:"input-modern"})}),t.jsxs("button",{onClick:()=>h("/song-collections/add"),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all btn-animate shadow-lg font-medium",children:[t.jsx(c,{size:20,className:"mr-2"}),"New Collection"]})]}),j&&t.jsx("p",{className:"text-center text-zinc-300 py-8",children:"Loading song collections..."}),!j&&0===p.length&&!N&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(a,{className:"mx-auto h-12 w-12 text-zinc-400 mb-4"}),t.jsx("p",{className:"text-zinc-300 text-lg mb-2",children:"No song collections found"}),t.jsx("p",{className:"text-zinc-400 mb-6",children:"Create your first song collection to get started"}),t.jsxs("button",{onClick:()=>h("/song-collections/add"),className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all btn-animate font-medium",children:[t.jsx(c,{size:20,className:"mr-2"}),"Create Collection"]})]}),!j&&p.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"hidden md:block bg-zinc-900/50 rounded-xl overflow-hidden border border-zinc-800",children:t.jsxs("table",{className:"min-w-full divide-y divide-zinc-700",children:[t.jsx("thead",{className:"bg-zinc-800",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider cursor-pointer hover:bg-zinc-700 transition-colors",onClick:()=>E("name"),children:t.jsxs("div",{className:"flex items-center",children:["Collection Name ",I("name")]})}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider",children:"Visibility"}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-zinc-300 uppercase tracking-wider cursor-pointer hover:bg-zinc-700 transition-colors",onClick:()=>E("created_at"),children:t.jsxs("div",{className:"flex items-center",children:["Created ",I("created_at")]})}),t.jsx("th",{className:"px-4 sm:px-6 py-3 text-right text-xs font-medium text-zinc-300 uppercase tracking-wider",children:"Actions"})]})}),t.jsx("tbody",{className:"bg-zinc-800 divide-y divide-zinc-700",children:q.map(e=>t.jsxs("tr",{className:"hover:bg-zinc-700 transition-colors",children:[t.jsx("td",{className:"px-4 sm:px-6 py-4",children:t.jsx("button",{onClick:()=>h(`/song-collections/${e.id}`),className:"text-sm font-medium text-blue-400 hover:text-blue-300 transition-colors text-left",children:e.name})}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-zinc-300",children:e.is_public?t.jsx("span",{className:"badge badge-success",children:"Public"}):t.jsx("span",{className:"badge badge-secondary",children:"Private"})}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-sm text-zinc-300",children:new Date(e.created_at).toLocaleDateString()}),t.jsx("td",{className:"px-4 sm:px-6 py-4 text-right",children:t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsx("button",{onClick:()=>h(`/song-collections/edit/${e.id}`),className:"p-2 text-blue-400 hover:text-blue-300 transition-colors",title:"Edit Collection",children:t.jsx(r,{size:18})}),t.jsx("button",{onClick:()=>L(e.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors",title:"Delete Collection",children:t.jsx(o,{size:18})})]})})]},e.id))})]})}),t.jsx("div",{className:"md:hidden space-y-4",children:q.map(e=>t.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4 border border-zinc-700",children:[t.jsx("div",{className:"flex items-start justify-between mb-3",children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("button",{onClick:()=>h(`/song-collections/${e.id}`),className:"text-lg font-semibold text-blue-400 hover:text-blue-300 transition-colors text-left block mb-2 truncate w-full",children:e.name}),t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.is_public?t.jsx("span",{className:"badge badge-success",children:"Public"}):t.jsx("span",{className:"badge badge-secondary",children:"Private"}),t.jsx("span",{className:"text-sm text-zinc-400",children:new Date(e.created_at).toLocaleDateString()})]})]})}),t.jsxs("div",{className:"flex justify-end space-x-2",children:[t.jsxs("button",{onClick:()=>h(`/song-collections/edit/${e.id}`),className:"inline-flex items-center px-3 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors text-sm",children:[t.jsx(r,{size:16,className:"mr-1"}),"Edit"]}),t.jsxs("button",{onClick:()=>L(e.id),className:"inline-flex items-center px-3 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition-colors text-sm",children:[t.jsx(o,{size:16,className:"mr-1"}),"Delete"]})]})]},e.id))}),A>1&&t.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-6 space-y-4 sm:space-y-0",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("label",{htmlFor:"items-per-page",className:"text-sm text-slate-300",children:"Items per page:"}),t.jsxs("select",{id:"items-per-page",value:D,onChange:e=>M(Number(e.target.value)),className:"block w-20 px-3 py-2 bg-zinc-800 border border-zinc-700 text-zinc-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:[t.jsx("option",{value:"5",children:"5"}),t.jsx("option",{value:"10",children:"10"}),t.jsx("option",{value:"20",children:"20"}),t.jsx("option",{value:"50",children:"50"})]})]}),t.jsxs("nav",{className:"flex space-x-1",children:[t.jsx("button",{onClick:()=>P(e=>Math.max(1,e-1)),disabled:1===S,className:"px-3 py-2 rounded-lg border border-zinc-600 bg-zinc-700 text-zinc-300 hover:bg-zinc-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),t.jsxs("span",{className:"px-4 py-2 text-zinc-300",children:[S," of ",A]}),t.jsx("button",{onClick:()=>P(e=>Math.min(A,e+1)),disabled:S===A,className:"px-3 py-2 rounded-lg border border-zinc-600 bg-zinc-700 text-zinc-300 hover:bg-zinc-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})]})};export{m as default};
