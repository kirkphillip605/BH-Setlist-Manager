import{E as t}from"./vendor-pdf-PEeN9p2O.js";import{a as e,d as o}from"./services-P15qPlA6.js";const s=async s=>{try{const n=await e.getSetlistById(s.id),i=new t({unit:"pt",format:"letter"}),a=30,r=i.internal.pageSize.getHeight(),d=i.internal.pageSize.getWidth();let l=a;const c=18,g=16,p=16,x=12,m=14,f=()=>{i.addPage(),l=a};i.setFontSize(c),i.setFont(void 0,"bold"),i.text(n.name,d/2,l,{align:"center"}),l+=c+2*m;for(let t=0;t<n.sets.length;t++){const{id:e}=n.sets[t],s=await o.getSetById(e);t>0&&f(),i.setFontSize(g),i.setFont(void 0,"bold"),i.setTextColor(0,0,0),i.text(s.name,a,l),l+=g+m;const d=(s.set_songs||[]).slice().sort((t,e)=>(t.song_order||0)-(e.song_order||0)).map(t=>t.songs);for(const t of d){l>r-a&&f();let e=a;const o=l;i.setFontSize(p),i.setFont(void 0,"bold"),i.setTextColor(0,0,0),i.text(t.title,e,o),e+=i.getTextWidth(t.title)+8,i.setFontSize(x),i.setFont(void 0,"normal"),i.setTextColor(100,100,100);const s=`by ${t.original_artist}`||"";if(i.text(s,e,o),e+=i.getTextWidth(s)+8,t.key_signature){i.setFont(void 0,"italic");const s=`[${t.key_signature}]`;i.text(s,e,o),e+=i.getTextWidth(s)+8}if(null!==t.tempo&&void 0!==t.tempo){i.setFont(void 0,"italic");const s=`${t.tempo} BPM`;i.text(s,e,o),e+=i.getTextWidth(s)+8}if(t.performance_note){i.setFont(void 0,"bold"),i.setTextColor(0,0,0);const s=` Note: *${t.performance_note}*`;i.text(s,e,o)}l+=p+m}}const v=`${n.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_setlist.pdf`,F=i.output("blob"),_=URL.createObjectURL(F),b=window.open(_,"_blank");b?b.onload=()=>b.print():i.save(v)}catch(n){throw n}};export{s as g};
