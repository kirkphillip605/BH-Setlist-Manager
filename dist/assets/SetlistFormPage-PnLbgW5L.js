import{a as e,u as s,j as t}from"./index-Babt8UfR.js";import{l,h as a,r as i}from"./vendor-react-ET7pSeaL.js";import{a as r}from"./services-P15qPlA6.js";import{j as n,t as o}from"./vendor-ui-CCR3b1TD.js";import"./vendor-supabase-DKeZICmP.js";const c=()=>{const{setlistId:c}=l(),{user:d}=e(),{setPageTitle:u}=s(),m=a(),[b,x]=i.useState(!1),[p,h]=i.useState(null),[g,f]=i.useState(""),[j,N]=i.useState(!1),v=!!c;i.useEffect(()=>{v?(u("Edit Setlist"),y()):(u("New Setlist"),f(""))},[c,v,u]);const y=async()=>{x(!0),h(null);try{const e=await r.getSetlistById(c);f(e.name),N(e.is_public||!1)}catch(e){h(e.message||"Failed to load setlist")}finally{x(!1)}};return b&&v?t.jsx("div",{className:"max-w-4xl mx-auto",children:t.jsx("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:t.jsx("p",{className:"text-center text-slate-300",children:"Loading setlist..."})})}):t.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[p&&t.jsxs("div",{className:"bg-red-900/50 border border-red-700 text-red-200 px-4 py-3 rounded-lg",children:[t.jsx("strong",{className:"font-bold",children:"Error!"}),t.jsxs("span",{className:"block sm:inline",children:[" ",p]})]}),t.jsx("div",{className:"bg-slate-800 rounded-xl p-4 lg:p-6 border border-slate-700",children:t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g.trim()){x(!0),h(null);try{const e={name:g,user_id:d.id,is_public:j};if(v)await r.updateSetlist(c,e),m(`/setlists/${c}`);else{const s=await r.createSetlist(e);m(`/setlists/${s.id}`)}}catch(s){h(s.message||"Failed to save setlist")}finally{x(!1)}}else h("Setlist name is required")},className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{htmlFor:"setlistName",className:"block text-sm font-medium text-slate-300 mb-2",children:"Setlist Name"}),t.jsx("input",{type:"text",id:"setlistName",value:g,onChange:e=>f(e.target.value),className:"block w-full px-4 py-3 bg-slate-700 border border-slate-600 text-slate-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter setlist name...",required:!0})]}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{id:"isPublic",type:"checkbox",checked:j,onChange:e=>N(e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-slate-600 rounded bg-slate-700"}),t.jsx("label",{htmlFor:"isPublic",className:"ml-2 block text-sm text-slate-300",children:"Make this setlist public (visible to all users)"})]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsxs("button",{type:"button",onClick:()=>{m("/setlists")},className:"inline-flex items-center px-4 py-2 border border-slate-600 rounded-lg text-slate-300 bg-slate-700 hover:bg-slate-600 transition-colors",children:[t.jsx(n,{size:18,className:"mr-2"}),"Cancel"]}),t.jsxs("button",{type:"submit",disabled:b||!g.trim(),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[t.jsx(o,{size:18,className:"mr-2"}),b?"Saving...":v?"Update Setlist":"Create Setlist"]})]})]})})]})};export{c as default};
