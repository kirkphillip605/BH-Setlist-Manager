const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/services-P15qPlA6.js","assets/vendor-supabase-DKeZICmP.js","assets/vendor-react-ET7pSeaL.js"])))=>i.map(i=>d[i]);
import{_ as e}from"./vendor-supabase-DKeZICmP.js";import{u as s,j as t}from"./index-Babt8UfR.js";import{h as a,r as l,L as i}from"./vendor-react-ET7pSeaL.js";import{a as n,b as c,c as r}from"./services-P15qPlA6.js";import{g as o}from"./pdfGenerator-Cd7u-Oa5.js";import{M as d,c as m,B as x,m as h,n as j}from"./vendor-ui-CCR3b1TD.js";import"./vendor-pdf-PEeN9p2O.js";const b=()=>{const{setPageTitle:b}=s(),u=a(),[p,g]=l.useState({totalSongs:0,totalSetlists:0,totalCollections:0}),[v,N]=l.useState([]),[f,w]=l.useState([]),[z,y]=l.useState(!0),[k,S]=l.useState(null);l.useEffect(()=>{b("Dashboard"),L(),_()},[b]);const _=async()=>{try{const t=await n.getAllSetlists();for(const a of t)try{const s=await e(async()=>{const{performanceService:e}=await import("./services-P15qPlA6.js").then(e=>e.f);return{performanceService:e}},__vite__mapDeps([0,1,2])).then(({performanceService:e})=>e.getActiveSession(a.id));if(s&&s.leader_id!==user.id){S({...s,setlist:a});break}}catch(s){}}catch(s){}},L=async()=>{y(!0);try{const[e,s,t]=await Promise.all([c.getAllSongs(),n.getAllSetlists(),r.getAllSongCollections()]);g({totalSongs:e.length,totalSetlists:s.length,totalCollections:t.length});const a=e.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at)).slice(0,5);N(a);const l=s.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at)).slice(0,5);w(l)}catch(e){}finally{y(!1)}};return t.jsxs("div",{className:"max-w-7xl mx-auto fade-in",children:[t.jsx("div",{className:"mb-6 sm:mb-8",children:t.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-2xl flex items-center justify-center",children:t.jsxs("svg",{className:"h-5 w-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v1H8V5z"})]})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-zinc-100",children:"Dashboard"}),t.jsx("p",{className:"text-sm sm:text-base text-zinc-400",children:"Welcome back to your setlist manager"})]})]})}),k&&t.jsx("div",{className:"card-modern p-4 sm:p-6 mb-6 sm:mb-8 border-l-4 border-l-green-500 bg-gradient-to-r from-green-500/10 to-transparent",children:t.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-4 sm:space-y-0 sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg sm:text-lg font-semibold text-zinc-100 mb-2 sm:mb-1",children:"ðŸŽ­ Performance Mode Active"}),t.jsxs("p",{className:"text-base sm:text-base text-zinc-300 mb-2 sm:mb-1",children:[t.jsx("span",{className:"font-medium",children:k.setlist.name})," is being performed"]}),t.jsxs("p",{className:"text-zinc-400 text-sm sm:text-sm",children:["Led by ",k.users?.name||"Unknown"," â€¢ Started ",new Date(k.created_at).toLocaleTimeString()]})]}),t.jsxs("button",{onClick:()=>u(`/performance?setlist=${k.setlist.id}`),className:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-all btn-animate shadow-lg font-medium mobile-form-button",children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),"Join as Follower"]})]})}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8",children:[t.jsxs("button",{onClick:()=>u("/songs"),className:"card-modern p-6 sm:p-6 text-left hover:scale-105 btn-animate group mobile-table-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-lg sm:text-lg font-semibold text-zinc-100",children:"Songs"}),t.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-2xl flex items-center justify-center group-hover:bg-blue-500/20 transition-colors",children:t.jsx(d,{className:"h-6 w-6 text-blue-400"})})]}),t.jsxs("div",{className:"flex items-baseline space-x-2",children:[t.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-zinc-100 tracking-tight",children:z?"...":p.totalSongs}),t.jsx("p",{className:"text-base sm:text-sm text-zinc-400",children:"in library"})]})]}),t.jsxs("button",{onClick:()=>u("/setlists"),className:"card-modern p-6 sm:p-6 text-left hover:scale-105 btn-animate group mobile-table-card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-lg sm:text-lg font-semibold text-zinc-100",children:"Setlists"}),t.jsx("div",{className:"w-12 h-12 bg-emerald-500/10 rounded-2xl flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:t.jsx(m,{className:"h-6 w-6 text-emerald-400"})})]}),t.jsxs("div",{className:"flex items-baseline space-x-2",children:[t.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-zinc-100 tracking-tight",children:z?"...":p.totalSetlists}),t.jsx("p",{className:"text-base sm:text-sm text-zinc-400",children:"created"})]})]}),t.jsxs("button",{onClick:()=>u("/song-collections"),className:"card-modern p-6 sm:p-6 text-left hover:scale-105 btn-animate group mobile-table-card sm:col-span-2 lg:col-span-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsx("h3",{className:"text-lg sm:text-lg font-semibold text-zinc-100",children:"Collections"}),t.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-2xl flex items-center justify-center group-hover:bg-purple-500/20 transition-colors",children:t.jsx(x,{className:"h-6 w-6 text-purple-400"})})]}),t.jsxs("div",{className:"flex items-baseline space-x-2",children:[t.jsx("p",{className:"text-2xl sm:text-3xl font-bold text-zinc-100 tracking-tight",children:z?"...":p.totalCollections}),t.jsx("p",{className:"text-base sm:text-sm text-zinc-400",children:"curated"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[t.jsxs("div",{className:"card-modern p-4 sm:p-6 slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-zinc-100 mb-1",children:"Recent Songs"}),t.jsx("p",{className:"text-sm sm:text-sm text-zinc-400",children:"Latest additions to your library"})]}),t.jsx(i,{to:"/songs",className:"text-blue-400 hover:text-blue-300 text-base sm:text-sm font-medium transition-colors hover:underline",children:"View All"})]}),z?t.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>t.jsxs("div",{className:"animate-pulse flex space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-zinc-700 rounded-xl"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 bg-zinc-700 rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-zinc-700 rounded w-1/2"})]})]},e))}):0===v.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(d,{className:"h-12 w-12 text-zinc-600 mx-auto mb-3"}),t.jsx("p",{className:"text-zinc-400 mb-2",children:"No songs yet"}),t.jsx(i,{to:"/songs/add",className:"text-blue-400 hover:text-blue-300 hover:underline transition-colors text-sm",children:"Add your first song"})]}):t.jsx("div",{className:"space-y-4",children:v.map(e=>t.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-xl hover:bg-zinc-700/30 transition-colors group",children:[t.jsx("div",{className:"w-10 h-10 bg-zinc-700 rounded-xl flex items-center justify-center group-hover:bg-zinc-600 transition-colors",children:t.jsx(d,{size:16,className:"text-zinc-400"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx(i,{to:`/songs/${e.id}`,className:"text-sm font-medium text-zinc-100 hover:text-blue-400 transition-colors block truncate",children:e.title}),t.jsxs("p",{className:"text-xs text-zinc-400 truncate",children:[e.original_artist,e.key_signature&&` â€¢ ${e.key_signature}`,null!==e.tempo&&void 0!==e.tempo&&` â€¢ ${e.tempo} BPM`,e.performance_note&&t.jsxs("span",{className:"flex items-center space-x-1 mt-1",children:[t.jsx("svg",{className:"w-3 h-3 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),t.jsx("span",{className:"text-amber-300 text-xs",children:e.performance_note})]})]})]}),t.jsx("span",{className:"text-xs text-zinc-500 whitespace-nowrap",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]}),t.jsxs("div",{className:"card-modern p-6 slide-up",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-semibold text-zinc-100 mb-1",children:"Recent Setlists"}),t.jsx("p",{className:"text-sm text-zinc-400",children:"Your latest performance setlists"})]}),t.jsx(i,{to:"/setlists",className:"text-blue-400 hover:text-blue-300 text-sm font-medium transition-colors hover:underline",children:"View All"})]}),z?t.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>t.jsxs("div",{className:"animate-pulse flex space-x-3",children:[t.jsx("div",{className:"w-10 h-10 bg-zinc-700 rounded-xl"}),t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"h-4 bg-zinc-700 rounded w-3/4"}),t.jsx("div",{className:"h-3 bg-zinc-700 rounded w-1/2"})]}),t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"w-6 h-6 bg-zinc-700 rounded"}),t.jsx("div",{className:"w-6 h-6 bg-zinc-700 rounded"})]})]},e))}):0===f.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx(m,{className:"h-12 w-12 text-zinc-600 mx-auto mb-3"}),t.jsx("p",{className:"text-zinc-400 mb-2",children:"No setlists yet"}),t.jsx(i,{to:"/setlists/add",className:"text-blue-400 hover:text-blue-300 hover:underline transition-colors text-sm",children:"Create your first setlist"})]}):t.jsx("div",{className:"space-y-4",children:f.map(e=>t.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-xl hover:bg-zinc-700/30 transition-colors group",children:[t.jsx("div",{className:"w-10 h-10 bg-zinc-700 rounded-xl flex items-center justify-center group-hover:bg-zinc-600 transition-colors",children:t.jsx(m,{size:16,className:"text-zinc-400"})}),t.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[t.jsx(i,{to:`/setlists/${e.id}`,className:"text-sm font-medium text-zinc-100 hover:text-blue-400 block truncate transition-colors",children:e.name}),t.jsx("p",{className:"text-xs text-zinc-400",children:new Date(e.created_at).toLocaleDateString()})]}),t.jsxs("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:()=>(async e=>{try{await o(e)}catch(s){}})(e),className:"p-2 text-emerald-400 hover:text-emerald-300 hover:bg-emerald-500/10 rounded-lg transition-all btn-animate",title:"Print Setlist",children:t.jsx(h,{size:16})}),t.jsx(i,{to:`/setlists/edit/${e.id}`,className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded-lg transition-all btn-animate",title:"Edit Setlist",children:t.jsx(j,{size:16})})]})]},e.id))})]})]})]})};export{b as default};
